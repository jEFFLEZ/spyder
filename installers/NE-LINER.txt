NE-LINER — Corrected one‑liner & notes (FR)

But / Purpose
-----------
Court rappel et one‑liner corrigé pour installer / démarrer `qflush` sans confusion avec `qflush`.

One‑liner PowerShell (installe et exécute l'installateur officiel pour `qflush`):

  iwr -useb https://funeste38.org/install-qflush.ps1 | iex

Remarques importantes
---------------------
- Nom correct du binaire : `qflush` (pas `qflush`).
- Le shim `%APPDATA%\\npm\\qflush.cmd` / `qflush.ps1` doit appeler le wrapper JS ou `dist/index.js`.
  - Pour la version, le shim doit appeler de façon sûre :
    node "<path-to-package>/package.json" via un petit wrapper JS ou `node -e "try{console.log(require('...').version)}catch(e){console.log('unknown')}"`.
  - Préférence: utiliser un `qflush-cli.js` wrapper (évite les problèmes d'échappement avec `node -e`).

Vérifications après installation
--------------------------------
1. Vérifier que le package global existe :
   npm root -g
   (cherchez `@funeste38/qflush` sous ce chemin)

2. Vérifier que les shims sont présents dans :
   %APPDATA%\\npm
   - qflush.cmd
   - qflush.ps1
   - qflush-cli.js (wrapper recommandé)

3. Vérifier le PATH utilisateur inclut `%APPDATA%\\npm` :
   [Environment]::GetEnvironmentVariable('PATH','User')
   Si absent : setx PATH "$([Environment]::GetEnvironmentVariable('PATH','User'));%APPDATA%\\npm" puis fermer/réouvrir le shell.

4. Tester :
   & "%APPDATA%\\npm\\qflush.cmd" --version
   qflush --version   (après rouverture du terminal)

Index / fichiers écrits
-----------------------
- L'index Rome est lu depuis `.qflush/rome-index.json` dans la racine du workspace.
- S'assurer que rien d'autre n'ouvre l'index automatiquement (mapping guarded by QFLUSH_ENABLE_MAPPING or FORCE_DISABLE_MAPPING).

Modifications appliquées
-----------------------
J'ai corrigé les scripts et docs suivants pour utiliser le nom `qflush` et chemins cohérents :
- `installers/ONE-LINER.txt` (one-liner now references `install-qflush.ps1`)
- `installers/install-all.ps1` (uses `QFlush` naming, destination folder `Funeste38\QFlush`)
- `installers/install-qflush.ps1` (messages updated to `qflush`, package name `@funeste38/qflush`)
- `installers/install-qflushd.ps1` (messages updated to `qflushd`)
- Created wrapper/shims: `%APPDATA%\\npm\\qflush-cli.js`, `qflush.cmd`, `qflush.ps1` when repairing installation.

Notes pour devs
---------------
- Éviter d'utiliser `node -e` avec des chemins Windows bruts dans les shims ; préférer un wrapper JS.
- Si un autre binaire `qflush` existe, désinstallez le pour éviter collision :
  npm uninstall -g @funeste38/qflush

Si tu veux que je renomme physiquement les scripts `install-qflush.ps1` → `install-qflush.ps1` et `install-qflushd.ps1` → `install-qflushd.ps1`, dis‑le et je le ferai (cela créera de nouveaux files and update references).


