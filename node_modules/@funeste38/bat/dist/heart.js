"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Heart = void 0;
class Heart {
    constructor(intervalMs = 1000) {
        this.timer = null;
        this.callbacks = [];
        this.running = false;
        this.intervalMs = intervalMs;
    }
    start() { if (this.running)
        return; this.running = true; this.timer = setInterval(() => this.tick(), this.intervalMs); }
    stop() { if (!this.running)
        return; clearInterval(this.timer); this.timer = null; this.running = false; }
    onTick(cb) { this.callbacks.push(cb); }
    tick() { for (const cb of this.callbacks) {
        try {
            cb();
        }
        catch { }
    } }
    reset() { this.stop(); this.start(); }
}
exports.Heart = Heart;
