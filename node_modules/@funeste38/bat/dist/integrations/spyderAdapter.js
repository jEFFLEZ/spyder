"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createSpyderAdapter = createSpyderAdapter;
const index_1 = require("../index");
function createSpyderAdapter(bridge, fangs) {
    const radar = new index_1.EchoRadar();
    const wings = new index_1.BatWings();
    async function callA11(text) {
        const directChannel = { id: 'direct', kind: 'local', endpoint: '', weight: 1, stats: { rttAvg: 0, errors: 0, inFlight: 0 } };
        // simple passthrough to the provided bridge
        return bridge.askA11Raw(directChannel, text);
    }
    async function askA11Multi(type, text) {
        if (!fangs)
            throw new Error('Fangs instance required for multi-channel calls');
        const { channel, result } = await fangs.run(type, async (ch) => {
            // askA11Raw expects (channel, text)
            return bridge.askA11Raw(ch, text);
        });
        return { channel, result };
    }
    return { callA11, askA11Multi, radar, wings };
}
