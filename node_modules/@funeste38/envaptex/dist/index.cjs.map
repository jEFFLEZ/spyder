{"version":3,"sources":["../src/Error.ts","../src/ListOfBuiltInConverters.ts","../src/Validators.ts","../src/core/EnvapterBase.ts","../src/BuiltInConverters.ts","../src/Parser.ts","../src/core/EnvironmentMethods.ts","../src/core/PrimitiveMethods.ts","../src/core/AdvancedMethods.ts","../src/Envapter.ts","../src/Envapt.ts","../src/Converters.ts"],"names":["EnvaptErrorCodes","config","fs","process","parsed","Environment","env","Converters"],"mappings":"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","file":"index.cjs","sourcesContent":["/* eslint-disable no-magic-numbers */\r\nexport enum EnvaptErrorCodes {\r\n  // Fallback related errors\r\n  /** Thrown when an invalid fallback value is provided */\r\n  InvalidFallback = 101,\r\n  /** Thrown when fallback value type doesn't match expected converter type */\r\n  InvalidFallbackType = 102,\r\n  /** Thrown when array fallback contains elements of wrong type */\r\n  ArrayFallbackElementTypeMismatch = 103,\r\n  /** Thrown when fallback type doesn't match the specified converter */\r\n  FallbackConverterTypeMismatch = 104,\r\n\r\n  // Converter related errors\r\n  /** Thrown when invalid array converter configuration is provided */\r\n  InvalidArrayConverterType = 201,\r\n  /** Thrown when an invalid built-in converter is specified */\r\n  InvalidBuiltInConverter = 202,\r\n  /** Thrown when a custom converter is not a function */\r\n  InvalidCustomConverter = 203,\r\n  /** Thrown when converter type is not recognized */\r\n  InvalidConverterType = 204,\r\n  /** Thrown when primitive type coercion on fallback value fails */\r\n  PrimitiveCoercionFailed = 205,\r\n\r\n  // Other errors\r\n  /** Thrown when delimiter is missing in array converter configuration */\r\n  // This doesn't happen because 203 is thrown when object without delimiter is passed\r\n  MissingDelimiter = 301,\r\n  /** Thrown when invalid user-defined configuration is provided */\r\n  InvalidUserDefinedConfig = 302,\r\n  /** Thrown when specified environment files don't exist */\r\n  EnvFilesNotFound = 303\r\n}\r\n\r\n/**\r\n * Custom error for better DX and debugging when using Envapt.\r\n *\r\n * @example\r\n * ```ts\r\n * throw new EnvaptError(EnvaptErrorCode.InvalidFallback, \"Invalid fallback value provided for environment variable.\");\r\n * ```\r\n */\r\nexport class EnvaptError extends Error {\r\n  public readonly code: EnvaptErrorCodes;\r\n\r\n  constructor(code: EnvaptErrorCodes, message: string) {\r\n    super(message);\r\n    this.name = `EnvaptError [${code}]`;\r\n    this.code = code;\r\n  }\r\n}\r\n","import type { ConverterValue } from './Converters';\r\nimport type { JsonValue } from './Types';\r\n\r\n/**\r\n * List of built-in converters for Envapt.\r\n * @internal\r\n */\r\nexport const ListOfBuiltInConverters: ConverterValue[] = [\r\n  'string',\r\n  'number',\r\n  'boolean',\r\n  'bigint',\r\n  'symbol',\r\n  'integer',\r\n  'float',\r\n  'json',\r\n  'array',\r\n  'url',\r\n  'regexp',\r\n  'date',\r\n  'time'\r\n] as const;\r\n\r\n/**\r\n * Type checking functions for built-in converter return types.\r\n * @internal\r\n */\r\nexport const BuiltInConverterTypeCheckers: Record<ConverterValue, (value: unknown) => boolean> = {\r\n  string: (value: unknown): value is string => typeof value === 'string',\r\n  number: (value: unknown): value is number => typeof value === 'number',\r\n  boolean: (value: unknown): value is boolean => typeof value === 'boolean',\r\n  bigint: (value: unknown): value is bigint => typeof value === 'bigint',\r\n  symbol: (value: unknown): value is symbol => typeof value === 'symbol',\r\n  integer: (value: unknown): value is number => typeof value === 'number' && Number.isInteger(value),\r\n  float: (value: unknown): value is number => typeof value === 'number',\r\n  json: (value: unknown): value is JsonValue => {\r\n    try {\r\n      JSON.parse(JSON.stringify(value));\r\n      return true;\r\n    } catch {\r\n      return false;\r\n    }\r\n  },\r\n  array: (value: unknown): value is unknown[] => Array.isArray(value),\r\n  url: (value: unknown): value is URL => value instanceof URL,\r\n  regexp: (value: unknown): value is RegExp => value instanceof RegExp,\r\n  date: (value: unknown): value is Date => value instanceof Date,\r\n  time: (value: unknown): value is number => typeof value === 'number'\r\n};\r\n","import fs from 'node:fs';\r\n\r\nimport { EnvaptError, EnvaptErrorCodes } from './Error';\r\nimport { ListOfBuiltInConverters, BuiltInConverterTypeCheckers } from './ListOfBuiltInConverters';\r\n\r\nimport type {\r\n  ArrayConverter,\r\n  BuiltInConverter,\r\n  ConverterFunction,\r\n  EnvaptConverter,\r\n  PermittedDotenvConfig,\r\n  ValidArrayConverterBuiltInType\r\n} from './Types';\r\n\r\nexport class Validator {\r\n  /**\r\n   * Check if a value is a built-in converter type\r\n   */\r\n  static isBuiltInConverter<TFallback>(value: EnvaptConverter<TFallback>): value is BuiltInConverter {\r\n    if (typeof value === 'string') return ListOfBuiltInConverters.includes(value);\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Check if a value is an ArrayConverter configuration object\r\n   */\r\n  static isArrayConverter(value: unknown): value is ArrayConverter {\r\n    return (\r\n      typeof value === 'object' &&\r\n      value !== null &&\r\n      'delimiter' in value &&\r\n      typeof (value as ArrayConverter).delimiter === 'string'\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Check if a value is a valid ArrayConverter type\r\n   */\r\n  static isValidArrayConverterType(value: unknown): value is ValidArrayConverterBuiltInType {\r\n    if (typeof value !== 'string') return false;\r\n\r\n    const invalidTypes = ['array', 'json', 'regexp'];\r\n\r\n    if (invalidTypes.includes(value)) return false;\r\n    const validTypes: ValidArrayConverterBuiltInType[] = ListOfBuiltInConverters.filter(\r\n      (type): type is ValidArrayConverterBuiltInType => !invalidTypes.includes(type)\r\n    );\r\n\r\n    return validTypes.includes(value as ValidArrayConverterBuiltInType);\r\n  }\r\n\r\n  static customConvertor<TFallback>(\r\n    converter: EnvaptConverter<TFallback>\r\n  ): asserts converter is ConverterFunction<TFallback> {\r\n    if (typeof converter !== 'function') {\r\n      throw new EnvaptError(\r\n        EnvaptErrorCodes.InvalidCustomConverter,\r\n        `Custom converter must be a function, got ${typeof converter}.`\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validate ArrayConverter configuration with runtime checks\r\n   */\r\n  static arrayConverter(value: unknown): asserts value is ArrayConverter {\r\n    if (!this.isArrayConverter(value)) {\r\n      throw new EnvaptError(EnvaptErrorCodes.MissingDelimiter, 'Must have delimiter property');\r\n    }\r\n\r\n    if (value.type !== undefined && !this.isValidArrayConverterType(value.type)) {\r\n      throw new EnvaptError(\r\n        EnvaptErrorCodes.InvalidArrayConverterType,\r\n        `\"${value.type as string}\" is not a valid converter type`\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validate that a string is a valid built-in converter type\r\n   */\r\n  static builtInConverter(value: unknown): asserts value is BuiltInConverter {\r\n    if (typeof value !== 'string') {\r\n      throw new EnvaptError(EnvaptErrorCodes.InvalidConverterType, `Expected string, got ${typeof value}`);\r\n    }\r\n\r\n    if (!ListOfBuiltInConverters.includes(value as BuiltInConverter)) {\r\n      throw new EnvaptError(\r\n        EnvaptErrorCodes.InvalidBuiltInConverter,\r\n        `\"${value}\" is not a valid converter type. Valid types are: ${ListOfBuiltInConverters.join(',')}`\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validate that fallback type matches the converter's return type for built-in converters\r\n   */\r\n  static validateBuiltInConverterFallback(converter: BuiltInConverter, fallback: unknown): void {\r\n    const typeChecker = BuiltInConverterTypeCheckers[converter];\r\n    if (!typeChecker(fallback)) {\r\n      throw new EnvaptError(\r\n        EnvaptErrorCodes.FallbackConverterTypeMismatch,\r\n        `Fallback type does not match converter \"${converter}\". Expected ${converter} compatible type.`\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validate that all elements in an array fallback have consistent types\r\n   */\r\n  static validateArrayFallbackElementTypes(fallback: unknown[]): void {\r\n    if (fallback.length === 0) return; // Empty array is valid\r\n\r\n    const firstElementType = typeof fallback[0];\r\n    const hasInconsistentTypes = fallback.some((element, index) => {\r\n      if (index === 0) return false; // Skip first element\r\n      return typeof element !== firstElementType;\r\n    });\r\n\r\n    if (hasInconsistentTypes) {\r\n      throw new EnvaptError(\r\n        EnvaptErrorCodes.ArrayFallbackElementTypeMismatch,\r\n        `All elements in array fallback must have the same type. Found mixed types.`\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validate that array converter type matches fallback element types\r\n   */\r\n  static validateArrayConverterElementTypeMatch(converterType: string, fallback: unknown[]): void {\r\n    if (fallback.length === 0) return; // Empty array is valid\r\n\r\n    const firstElement = fallback[0];\r\n    const typeChecker = BuiltInConverterTypeCheckers[converterType as keyof typeof BuiltInConverterTypeCheckers];\r\n\r\n    if (!typeChecker(firstElement)) {\r\n      throw new EnvaptError(\r\n        EnvaptErrorCodes.ArrayFallbackElementTypeMismatch,\r\n        `Array converter type \"${converterType}\" does not match fallback element type. Expected ${converterType} compatible elements.`\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if a value is a primitive constructor\r\n   */\r\n  static isPrimitiveConstructor(\r\n    value: unknown\r\n  ): value is typeof String | typeof Number | typeof Boolean | typeof BigInt | typeof Symbol {\r\n    return value === String || value === Number || value === Boolean || value === BigInt || value === Symbol;\r\n  }\r\n\r\n  /**\r\n   * Safely coerce a fallback value using a primitive constructor\r\n   */\r\n  static coercePrimitiveFallback<CoercedType>(\r\n    converter: typeof String | typeof Number | typeof Boolean | typeof BigInt | typeof Symbol,\r\n    fallback: unknown\r\n  ): CoercedType {\r\n    // Check if fallback is already the correct type and return as-is\r\n    if (this.isCorrectPrimitiveType(converter, fallback)) return fallback as CoercedType;\r\n\r\n    // Otherwise, coerce the value\r\n    return this.performPrimitiveCoercion<CoercedType>(converter, fallback);\r\n  }\r\n\r\n  /**\r\n   * Check if fallback is already the correct primitive type\r\n   */\r\n  private static isCorrectPrimitiveType(\r\n    converter: typeof String | typeof Number | typeof Boolean | typeof BigInt | typeof Symbol,\r\n    fallback: unknown\r\n  ): boolean {\r\n    if (converter === String && typeof fallback === 'string') return true;\r\n    if (converter === Number && typeof fallback === 'number') return true;\r\n    if (converter === Boolean && typeof fallback === 'boolean') return true;\r\n    if (converter === BigInt && typeof fallback === 'bigint') return true;\r\n    if (converter === Symbol && typeof fallback === 'symbol') return true;\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Perform the actual primitive coercion\r\n   */\r\n  private static performPrimitiveCoercion<CoercedType>(\r\n    converter: typeof String | typeof Number | typeof Boolean | typeof BigInt | typeof Symbol,\r\n    fallback: unknown\r\n  ): CoercedType {\r\n    try {\r\n      if (converter === String) return String(fallback) as CoercedType;\r\n      if (converter === Number) return Number(fallback) as CoercedType;\r\n      if (converter === Boolean) return Boolean(fallback) as CoercedType;\r\n      if (converter === BigInt) return BigInt(fallback as string | number | bigint) as CoercedType;\r\n      if (converter === Symbol) return Symbol.for(String(fallback)) as CoercedType;\r\n    } catch (error) {\r\n      throw new EnvaptError(\r\n        EnvaptErrorCodes.PrimitiveCoercionFailed,\r\n        `Failed to coerce fallback value using ${converter.name}: ${(error as Error).message}`\r\n      );\r\n    }\r\n\r\n    // This should never happen but TypeScript needs it\r\n    /* v8 ignore next */\r\n    throw new EnvaptError(EnvaptErrorCodes.PrimitiveCoercionFailed, `Unknown primitive converter: ${converter.name}`);\r\n  }\r\n\r\n  /**\r\n   * Make sure the user hasn't provided prohibited options in their dotenv config\r\n   */\r\n  static validateDotenvConfig(config: Record<string, unknown>): config is PermittedDotenvConfig {\r\n    if ('path' in config || 'processEnv' in config) {\r\n      throw new EnvaptError(\r\n        EnvaptErrorCodes.InvalidUserDefinedConfig,\r\n        'Custom dotenvConfig should not include \"path\" or \"processEnv\" options. Those are managed by Envapter.'\r\n      );\r\n    }\r\n\r\n    const validKeys = new Set(['encoding', 'quiet', 'debug', 'override', 'DOTENV_KEY']);\r\n    const invalidKeys = Object.keys(config).filter((key) => !validKeys.has(key));\r\n\r\n    if (invalidKeys.length > 0) {\r\n      throw new EnvaptError(\r\n        EnvaptErrorCodes.InvalidUserDefinedConfig,\r\n        `Invalid dotenvConfig options: ${invalidKeys.join(', ')}. Allowed options: ${Array.from(validKeys).join(', ')}`\r\n      );\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Check if each provided path resolves to an env file by trying to access it\r\n   */\r\n  static validateEnvFilesExist(paths: string[]): void {\r\n    const missing = paths.filter((p) => {\r\n      try {\r\n        fs.accessSync(p, fs.constants.F_OK);\r\n        return false;\r\n      } catch {\r\n        return true;\r\n      }\r\n    });\r\n\r\n    if (missing.length > 0) {\r\n      throw new EnvaptError(\r\n        EnvaptErrorCodes.EnvFilesNotFound,\r\n        `Environment file not found at path: ${missing.join(', ')}`\r\n      );\r\n    }\r\n  }\r\n}\r\n","import * as process from 'node:process';\r\nimport { config } from 'dotenv';\r\n\r\nimport { Validator } from '../Validators.js';\r\n\r\nimport type { PermittedDotenvConfig } from '../Types.js';\r\n\r\n/**\r\n * Base cache for environment variables and computed values\r\n * @internal\r\n */\r\nexport const EnvaptCache = new Map<string, unknown>();\r\n\r\n/**\r\n * Base class for environment variable management\r\n * Handles configuration, caching, and basic environment loading\r\n * @internal\r\n */\r\nexport abstract class EnvapterBase {\r\n  protected static _envPaths: string[] = ['.env']; // default path\r\n  protected static _userDefinedDotenvConfig: PermittedDotenvConfig = { quiet: true };\r\n\r\n  /**\r\n   * Set custom .env file paths. Accepts either a single path or array of paths.\r\n   * Setting new paths clears the cache and reloads environment variables.\r\n   */\r\n  static set envPaths(paths: string[] | string) {\r\n    const newPaths = Array.isArray(paths) ? paths : [paths];\r\n    Validator.validateEnvFilesExist(newPaths);\r\n\r\n    this._envPaths = newPaths;\r\n    this.refreshCache();\r\n  }\r\n\r\n  /**\r\n   * Get currently configured .env file paths\r\n   */\r\n  static get envPaths(): string[] {\r\n    return this._envPaths;\r\n  }\r\n\r\n  /**\r\n   * Set custom dotenv configuration options.\r\n   */\r\n  static set dotenvConfig(config: PermittedDotenvConfig) {\r\n    Validator.validateDotenvConfig(config);\r\n    this._userDefinedDotenvConfig = config;\r\n    this.refreshCache();\r\n  }\r\n\r\n  /**\r\n   * Get current dotenv configuration options\r\n   */\r\n  static get dotenvConfig(): PermittedDotenvConfig {\r\n    return this._userDefinedDotenvConfig;\r\n  }\r\n\r\n  protected static refreshCache(): void {\r\n    EnvaptCache.clear();\r\n    void this.config; // reload config to repopulate cache\r\n  }\r\n\r\n  protected static get config(): Map<string, unknown> {\r\n    if (EnvaptCache.size === 0) {\r\n      // create isolated environment object starting from process.env so test modifications are respected\r\n      const isolatedEnv: Record<string, string> = { ...(process.env as unknown as Record<string, string>) };\r\n\r\n      try {\r\n        // prepare dotenv config ensuring .env files override process.env by default\r\n        const effectiveConfig = { path: this._envPaths, processEnv: isolatedEnv, ...this._userDefinedDotenvConfig } as Record<string, unknown>;\r\n        if (!('override' in effectiveConfig)) (effectiveConfig as any).override = true;\r\n\r\n        // load _envPath file from custom path into isolated environment object\r\n        config(effectiveConfig as any);\r\n        /* v8 ignore next */\r\n      } catch {}\r\n\r\n      // populate the Map with environment variables loaded into isolatedEnv\r\n      for (const [key, value] of Object.entries(isolatedEnv)) EnvaptCache.set(key, value);\r\n    }\r\n\r\n    return EnvaptCache;\r\n  }\r\n\r\n  /**\r\n   * Get raw environment variable value without parsing or conversion.\r\n   */\r\n  getRaw(key: string): string | undefined {\r\n    return EnvapterBase.config.get(key) as string | undefined;\r\n  }\r\n\r\n  /**\r\n   * Get the first non-empty environment variable among a list of keys.\r\n   * This is the core helper used for `keys: []` support at higher levels.\r\n   */\r\n  getRawFrom(keys: string[]): string | undefined {\r\n    for (const key of keys) {\r\n      const value = EnvapterBase.config.get(key) as string | undefined;\r\n      if (value !== undefined && value !== null && value !== '') {\r\n        return value;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n","/* eslint-disable @typescript-eslint/unbound-method */\r\n\r\nimport type {\r\n  ArrayConverter,\r\n  BuiltInConverter,\r\n  BuiltInConverterFunction,\r\n  JsonValue,\r\n  MapOfConverterFunctions,\r\n  TimeUnit\r\n} from './Types';\r\n\r\n/**\r\n * Built-in converter implementations\r\n * @internal\r\n */\r\nexport class BuiltInConverters {\r\n  static string(raw: string, fallback?: string): string | undefined {\r\n    return String(raw) || fallback;\r\n  }\r\n\r\n  static number(raw: string, fallback?: number): number | undefined {\r\n    const parsed = Number(raw);\r\n    return Number.isNaN(parsed) ? fallback : parsed;\r\n  }\r\n\r\n  static boolean(raw: string, fallback?: boolean): boolean | undefined {\r\n    const lower = raw.toLowerCase().trim();\r\n\r\n    const truthyValues = ['1', 'yes', 'true', 'on'];\r\n    const falsyValues = ['0', 'no', 'false', 'off'];\r\n\r\n    if (truthyValues.includes(lower)) return true;\r\n    if (falsyValues.includes(lower)) return false;\r\n    return fallback;\r\n  }\r\n\r\n  static bigint(raw: string, fallback?: bigint): bigint | undefined {\r\n    try {\r\n      return BigInt(raw);\r\n    } catch {\r\n      return fallback;\r\n    }\r\n  }\r\n\r\n  static symbol(raw: string, fallback?: symbol): symbol | undefined {\r\n    try {\r\n      return raw ? Symbol.for(raw) : fallback;\r\n      /* v8 ignore next 3 */\r\n    } catch {\r\n      return fallback;\r\n    }\r\n  }\r\n\r\n  static integer(raw: string, fallback?: number): number | undefined {\r\n    const parsed = Number.parseInt(raw, 10);\r\n    return Number.isNaN(parsed) ? fallback : parsed;\r\n  }\r\n\r\n  static float(raw: string, fallback?: number): number | undefined {\r\n    const parsed = Number.parseFloat(raw);\r\n    return Number.isNaN(parsed) ? fallback : parsed;\r\n  }\r\n\r\n  static json(raw: string, fallback?: JsonValue): JsonValue | undefined {\r\n    try {\r\n      return JSON.parse(raw) as JsonValue;\r\n    } catch {\r\n      return fallback;\r\n    }\r\n  }\r\n\r\n  static array(raw: string, fallback?: string[], delimiter = ','): string[] | undefined {\r\n    if (raw.trim() === '') return [];\r\n    const arr = raw\r\n      .split(delimiter)\r\n      .map((item) => item.trim())\r\n      .filter(Boolean);\r\n    return arr.length ? arr : fallback;\r\n  }\r\n\r\n  static url(raw: string, fallback?: URL): URL | undefined {\r\n    try {\r\n      return new URL(raw);\r\n    } catch {\r\n      return fallback;\r\n    }\r\n  }\r\n\r\n  static regexp(raw: string, fallback?: RegExp): RegExp | undefined {\r\n    try {\r\n      // Handle flags if provided in format: /pattern/flags\r\n      const match = raw.match(new RegExp(String.raw`^\\/(.+)\\/([gimsuvy]*)$`));\r\n      if (match) return new RegExp(match[1] as string, match[2]);\r\n\r\n      return new RegExp(raw);\r\n    } catch {\r\n      return fallback;\r\n    }\r\n  }\r\n\r\n  static date(raw: string, fallback?: Date): Date | undefined {\r\n    // Try parsing as timestamp first (if it's all digits)\r\n    if (new RegExp(String.raw`^\\d+$`).test(raw)) {\r\n      const timestamp = parseInt(raw, 10);\r\n      const parsed = new Date(timestamp);\r\n      return Number.isNaN(parsed.getTime()) ? fallback : parsed;\r\n    }\r\n\r\n    // Only accept ISO 8601 date strings (strict format)\r\n    const isoRegex = new RegExp(String.raw`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d{3})?Z$`, 'u');\r\n    if (!isoRegex.test(raw)) return fallback;\r\n\r\n    const parsed = new Date(raw);\r\n    return Number.isNaN(parsed.getTime()) ? fallback : parsed;\r\n  }\r\n\r\n  static time(raw: string, fallback?: number): number | undefined {\r\n    const match = raw.match(new RegExp(String.raw`^(\\d+(?:\\.\\d+)?)(ms|s|m|h)?$`, 'u'));\r\n    if (!match) return fallback;\r\n\r\n    const [, numStr, capturedUnit] = match;\r\n    if (!numStr) return fallback;\r\n\r\n    const value = Number.parseFloat(numStr);\r\n    if (Number.isNaN(value)) return fallback;\r\n\r\n    const unit: TimeUnit = (capturedUnit ?? 'ms') as TimeUnit;\r\n\r\n    const SECONDS_TO_MS = 1000;\r\n    const SECONDS_PER_MINUTE = 60;\r\n    const MINUTES_PER_HOUR = 60;\r\n    const MINUTES_TO_MS = SECONDS_PER_MINUTE * SECONDS_TO_MS;\r\n    const HOURS_TO_MS = MINUTES_PER_HOUR * MINUTES_TO_MS;\r\n\r\n    if (unit === 'ms') return value;\r\n    if (unit === 's') return value * SECONDS_TO_MS;\r\n    if (unit === 'm') return value * MINUTES_TO_MS;\r\n    return value * HOURS_TO_MS;\r\n  }\r\n\r\n  /**\r\n   * Process array with custom converter config\r\n   */\r\n  static processArrayConverter(raw: string, fallback: unknown, config: ArrayConverter): unknown[] | undefined {\r\n    if (raw.trim() === '') return [];\r\n\r\n    const items = raw\r\n      .split(config.delimiter)\r\n      .map((item) => String(item).trim())\r\n      .filter(Boolean);\r\n\r\n    // If no items after split, return fallback if provided\r\n    if (!items.length) return fallback ? (fallback as unknown[]) : undefined;\r\n\r\n    // If no type specified, return as string array\r\n    const type = config.type;\r\n    if (!type) return items;\r\n\r\n    // Convert each item using the specified type\r\n    const converter = BuiltInConverters.getConverter(type);\r\n    return items.map((item) => {\r\n      const converted = converter(item, undefined);\r\n      return converted ?? item;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get the converter function for a built-in converter type\r\n   */\r\n  static getConverter<TFallback extends BuiltInConverter>(type: TFallback): BuiltInConverterFunction {\r\n    const converters: MapOfConverterFunctions = {\r\n      string: BuiltInConverters.string,\r\n      number: BuiltInConverters.number,\r\n      boolean: BuiltInConverters.boolean,\r\n      integer: BuiltInConverters.integer,\r\n      bigint: BuiltInConverters.bigint,\r\n      symbol: BuiltInConverters.symbol,\r\n      float: BuiltInConverters.float,\r\n      json: BuiltInConverters.json,\r\n      array: BuiltInConverters.array,\r\n      url: BuiltInConverters.url,\r\n      regexp: BuiltInConverters.regexp,\r\n      date: BuiltInConverters.date,\r\n      time: BuiltInConverters.time\r\n    } as const;\r\n\r\n    return converters[type];\r\n  }\r\n}\r\n","import { BuiltInConverters } from './BuiltInConverters.js';\r\nimport { EnvaptError, EnvaptErrorCodes } from './Error.js';\r\nimport { Validator } from './Validators.js';\r\n\r\nimport type { EnvaptConverter, PrimitiveConstructor, ArrayConverter, BuiltInConverter, ConverterFunction } from './Types.js';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface EnvapterService {\r\n  getRaw(key: string): string | undefined;\r\n  get(key: string, def?: string): string | undefined;\r\n}\r\n\r\n/**\r\n * Parser class for handling environment variable template resolution and type conversion\r\n * @internal\r\n */\r\nexport class Parser {\r\n  private readonly TEMPLATE_REGEX = /\\${\\w*}/g;\r\n\r\n  constructor(private readonly envService: EnvapterService) {}\r\n\r\n  /**\r\n   * Resolve template variables in a string while handling circular references and missing variables\r\n   * @internal\r\n   */\r\n  resolveTemplate(key: string, value: string, stack: Set<string> = new Set<string>()): string {\r\n    stack.add(key);\r\n\r\n    const out = value.replace(this.TEMPLATE_REGEX, (template) => {\r\n      const variable = template.slice(2, -1);\r\n\r\n      if (stack.has(variable)) return template; // cycle, preserve\r\n\r\n      const raw = this.envService.getRaw(variable);\r\n      if (!raw || raw === '') return template; // missing or empty, preserve\r\n\r\n      const resolved = this.resolveTemplate(variable, raw, new Set(stack));\r\n\r\n      // If resolution still references the current key, skip replacement (indirect cycle)\r\n      if (resolved.includes(`\\${${key}}`)) return template;\r\n\r\n      // If nothing changed (unresolved placeholders stayed), also preserve original template\r\n      if (resolved === raw && /\\$\\{[^}]*\\}/.test(resolved)) return template;\r\n\r\n      return resolved;\r\n    });\r\n\r\n    stack.delete(key);\r\n    return out;\r\n  }\r\n\r\n  convertValue<TFallback>(\r\n    key: string,\r\n    fallback: TFallback | undefined,\r\n    converter: EnvaptConverter<TFallback> | undefined,\r\n    hasFallback: boolean\r\n  ): TFallback | null | undefined {\r\n    const resolvedConverter = this.resolveConverter(converter, fallback);\r\n    const processedFallback = this.processFallbackForConverter(resolvedConverter, fallback);\r\n\r\n    // Handle different converter types\r\n    if (Validator.isArrayConverter(resolvedConverter)) {\r\n      return this.processArrayConverter(key, processedFallback, resolvedConverter as ArrayConverter, hasFallback);\r\n    }\r\n\r\n    if (Validator.isPrimitiveConstructor(resolvedConverter)) {\r\n      const stringConverter = this.convertPrimitiveToString(resolvedConverter);\r\n      return this.processBuiltInConverter(key, processedFallback, stringConverter, hasFallback, true);\r\n    }\r\n\r\n    if (Validator.isBuiltInConverter(resolvedConverter)) {\r\n      return this.processBuiltInConverter(key, processedFallback, resolvedConverter, hasFallback, false);\r\n    }\r\n\r\n    return this.processCustomConverter(key, processedFallback, resolvedConverter, hasFallback);\r\n  }\r\n\r\n  private processFallbackForConverter<TFallback>(\r\n    converter: EnvaptConverter<TFallback>,\r\n    fallback: TFallback | undefined\r\n  ): TFallback | undefined {\r\n    // For primitive constructors, coerce the fallback to match the converter\r\n    if (Validator.isPrimitiveConstructor(converter) && fallback !== undefined) {\r\n      return Validator.coercePrimitiveFallback<TFallback>(converter, fallback);\r\n    }\r\n    return fallback;\r\n  }\r\n\r\n  private convertPrimitiveToString(primitiveConstructor: PrimitiveConstructor): BuiltInConverter {\r\n    if (primitiveConstructor === String) return 'string';\r\n    if (primitiveConstructor === Number) return 'number';\r\n    if (primitiveConstructor === Boolean) return 'boolean';\r\n    if (primitiveConstructor === BigInt) return 'bigint';\r\n    if (primitiveConstructor === Symbol) return 'symbol';\r\n\r\n    /* v8 ignore next */\r\n    throw new EnvaptError(EnvaptErrorCodes.InvalidConverterType, `Unknown primitive constructor`);\r\n  }\r\n\r\n  private processBuiltInConverter<TFallback>(\r\n    key: string,\r\n    fallback: TFallback | undefined,\r\n    resolvedConverter: BuiltInConverter,\r\n    hasFallback: boolean,\r\n    wasOriginallyConstructor: boolean\r\n  ): TFallback | null | undefined {\r\n    // Validate the built-in converter at runtime\r\n    Validator.builtInConverter(resolvedConverter);\r\n\r\n    // Validate fallback type matches converter for built-in converters\r\n    // Only apply strict validation if this wasn't originally a constructor\r\n    if (hasFallback && fallback !== undefined && !wasOriginallyConstructor) {\r\n      Validator.validateBuiltInConverterFallback(resolvedConverter, fallback);\r\n\r\n      // Special handling for 'array' converter - check array element consistency\r\n      if (resolvedConverter === 'array' && Array.isArray(fallback)) {\r\n        Validator.validateArrayFallbackElementTypes(fallback);\r\n      }\r\n    }\r\n\r\n    const parsed = this.envService.get(key, undefined);\r\n\r\n    if (parsed === undefined) return hasFallback ? fallback : null;\r\n\r\n    const converterFn = BuiltInConverters.getConverter(resolvedConverter);\r\n    const result = converterFn(parsed, fallback);\r\n\r\n    // If converter failed (returned undefined) and no fallback was provided, return null\r\n    if (result === undefined && !hasFallback) return null;\r\n\r\n    return result as TFallback;\r\n  }\r\n\r\n  private processArrayConverter<TFallback>(\r\n    key: string,\r\n    fallback: TFallback | undefined,\r\n    resolvedConverter: ArrayConverter,\r\n    hasFallback: boolean\r\n  ): TFallback | null | undefined {\r\n    // Validate the resolvedConverter at runtime and assert that it is indeed an ArrayConverter\r\n    Validator.arrayConverter(resolvedConverter);\r\n\r\n    // Validate fallback type if a fallback is provided\r\n    if (hasFallback && fallback !== undefined && !Array.isArray(fallback)) {\r\n      throw new EnvaptError(\r\n        EnvaptErrorCodes.InvalidFallback,\r\n        `ArrayConverter requires that the fallback be an array, got ${typeof fallback}`\r\n      );\r\n    }\r\n\r\n    // Additional validations for array converter fallbacks\r\n    if (hasFallback && Array.isArray(fallback)) {\r\n      // Validate that all elements in fallback array have consistent types\r\n      Validator.validateArrayFallbackElementTypes(fallback);\r\n\r\n      // For array converters with a type, validate that converter type matches fallback elements\r\n      if (resolvedConverter.type) {\r\n        Validator.validateArrayConverterElementTypeMatch(resolvedConverter.type, fallback);\r\n      }\r\n    }\r\n\r\n    const parsed = this.envService.get(key, undefined);\r\n\r\n    if (parsed === undefined) return hasFallback ? fallback : null;\r\n\r\n    const result = BuiltInConverters.processArrayConverter(parsed, fallback, resolvedConverter);\r\n\r\n    // If converter failed (returned undefined) and no fallback was provided, return null\r\n    if (result === undefined && !hasFallback) return null;\r\n\r\n    return result as TFallback;\r\n  }\r\n\r\n  private processCustomConverter<TFallback>(\r\n    key: string,\r\n    fallback: TFallback | undefined,\r\n    resolvedConverter: EnvaptConverter<TFallback>,\r\n    _hasFallback: boolean // hasFallback is not needed because customConverter is called even if the raw value is undefined\r\n  ): TFallback | null | undefined {\r\n    Validator.customConvertor(resolvedConverter);\r\n\r\n    // Custom converter function\r\n    const raw = this.envService.get(key, undefined);\r\n\r\n    const fn = resolvedConverter as ConverterFunction<TFallback>;\r\n    return fn(raw, fallback);\r\n  }\r\n\r\n  private resolveConverter<TFallback>(\r\n    converter: EnvaptConverter<TFallback> | undefined,\r\n    fallback: TFallback | undefined\r\n  ): EnvaptConverter<TFallback> {\r\n    // User provided explicit converter. Use it\r\n    if (converter) return converter;\r\n\r\n    // Auto-detect type from fallback using typeof\r\n    const fallbackType = typeof fallback;\r\n    if (fallbackType === 'number') return 'number';\r\n    if (fallbackType === 'boolean') return 'boolean';\r\n    if (fallbackType === 'bigint') return 'bigint';\r\n    if (fallbackType === 'symbol') return 'symbol';\r\n    return 'string';\r\n  }\r\n}\r\n","import { EnvapterBase } from './EnvapterBase.js';\r\n\r\n/**\r\n * Environment types supported by Envapter\r\n * @public\r\n */\r\nexport enum Environment {\r\n  Development,\r\n  Staging,\r\n  Production\r\n}\r\n\r\n/**\r\n * Mixin for environment detection and checking methods\r\n * @internal\r\n */\r\nexport class EnvironmentMethods extends EnvapterBase {\r\n  protected static _environment: Environment | undefined;\r\n\r\n  protected static determineEnvironment(env?: string | Environment): void {\r\n    const environment =\r\n      env ?? this.getRawValue('ENVIRONMENT', this.getRawValue('ENV', this.getRawValue('NODE_ENV', 'development')));\r\n\r\n    if (typeof environment === 'string') {\r\n      this._environment =\r\n        environment.toLowerCase() === 'production'\r\n          ? Environment.Production\r\n          : environment === 'staging'\r\n            ? Environment.Staging\r\n            : Environment.Development;\r\n    } else {\r\n      this._environment = environment;\r\n    }\r\n  }\r\n\r\n  private static getRawValue(key: string, fallback: string): string {\r\n    return (this.config.get(key) as string) || fallback;\r\n  }\r\n\r\n  /**\r\n   * Get the current application environment\r\n   */\r\n  static get environment(): Environment {\r\n    if (this._environment === undefined) {\r\n      this.determineEnvironment();\r\n    }\r\n    return this._environment as Environment;\r\n  }\r\n\r\n  /**\r\n   * Set the application environment. Accepts either Environment enum or string value.\r\n   */\r\n  static set environment(env: string | Environment) {\r\n    this.determineEnvironment(env);\r\n  }\r\n\r\n  /**\r\n   * @see {@link EnvironmentMethods.environment}\r\n   */\r\n  get environment(): Environment {\r\n    return EnvironmentMethods.environment;\r\n  }\r\n\r\n  /**\r\n   * @see {@link EnvironmentMethods.environment}\r\n   */\r\n  set environment(env: string | Environment) {\r\n    EnvironmentMethods.determineEnvironment(env);\r\n  }\r\n\r\n  /**\r\n   * Check if the current environment is production\r\n   */\r\n  static get isProduction(): boolean {\r\n    return this.environment === Environment.Production;\r\n  }\r\n\r\n  /**\r\n   * @see {@link EnvironmentMethods.isProduction}\r\n   */\r\n  get isProduction(): boolean {\r\n    return EnvironmentMethods.environment === Environment.Production;\r\n  }\r\n\r\n  /**\r\n   * Check if the current environment is staging\r\n   */\r\n  static get isStaging(): boolean {\r\n    return this.environment === Environment.Staging;\r\n  }\r\n\r\n  /**\r\n   * @see {@link EnvironmentMethods.isStaging}\r\n   */\r\n  get isStaging(): boolean {\r\n    return EnvironmentMethods.environment === Environment.Staging;\r\n  }\r\n\r\n  /**\r\n   * Check if the current environment is development\r\n   */\r\n  static get isDevelopment(): boolean {\r\n    return this.environment === Environment.Development;\r\n  }\r\n\r\n  /**\r\n   * @see {@link EnvironmentMethods.isDevelopment}\r\n   */\r\n  get isDevelopment(): boolean {\r\n    return EnvironmentMethods.environment === Environment.Development;\r\n  }\r\n\r\n  protected static override refreshCache(): void {\r\n    super.refreshCache();\r\n    this._environment = undefined; // re-evaluate environment on next access\r\n  }\r\n}\r\n","import { BuiltInConverters } from '../BuiltInConverters.js';\r\nimport { Parser, type EnvapterService } from '../Parser.js';\r\nimport { EnvironmentMethods } from './EnvironmentMethods.js';\r\n\r\nimport type { ConditionalReturn } from '../Types.js';\r\n\r\n/**\r\n * @internal\r\n */\r\nenum Primitive {\r\n  String,\r\n  Number,\r\n  Boolean,\r\n  BigInt,\r\n  Symbol\r\n}\r\n\r\n/**\r\n * Mixin for primitive environment variable getter methods\r\n * @internal\r\n */\r\nexport class PrimitiveMethods extends EnvironmentMethods implements EnvapterService {\r\n  protected static readonly parser: Parser = new Parser(new PrimitiveMethods());\r\n\r\n  private static _get<EnvVarReturnType, DefaultType extends EnvVarReturnType | undefined = undefined>(\r\n    key: string,\r\n    type: Primitive,\r\n    def?: DefaultType\r\n  ): ConditionalReturn<EnvVarReturnType, DefaultType> {\r\n    const rawVal = this.config.get(key) as string | number | boolean;\r\n    if (!rawVal) return def as ConditionalReturn<EnvVarReturnType, DefaultType>;\r\n\r\n    const parsed = this.parser.resolveTemplate(key, String(rawVal));\r\n\r\n    let result: EnvVarReturnType;\r\n    if (type === Primitive.Number) result = BuiltInConverters.number(parsed, def as number) as EnvVarReturnType;\r\n    else if (type === Primitive.Boolean) result = BuiltInConverters.boolean(parsed, def as boolean) as EnvVarReturnType;\r\n    else if (type === Primitive.BigInt) result = BuiltInConverters.bigint(parsed, def as bigint) as EnvVarReturnType;\r\n    else if (type === Primitive.Symbol) result = BuiltInConverters.symbol(parsed, def as symbol) as EnvVarReturnType;\r\n    else result = BuiltInConverters.string(parsed, def as string) as EnvVarReturnType;\r\n\r\n    return result as ConditionalReturn<EnvVarReturnType, DefaultType>;\r\n  }\r\n\r\n  /**\r\n   * Get a string environment variable with optional fallback.\r\n   * Supports template variable resolution using $\\{VAR\\} syntax.\r\n   */\r\n  static get<Default extends string | undefined = undefined>(\r\n    key: string,\r\n    def?: Default\r\n  ): ConditionalReturn<string, Default> {\r\n    return this._get(key, Primitive.String, def);\r\n  }\r\n\r\n  /**\r\n   * @see {@link PrimitiveMethods.get}\r\n   */\r\n  get<Default extends string | undefined = undefined>(key: string, def?: Default): ConditionalReturn<string, Default> {\r\n    return PrimitiveMethods._get(key, Primitive.String, def);\r\n  }\r\n\r\n  /**\r\n   * Get a number environment variable with optional fallback.\r\n   * Automatically converts string values to numbers.\r\n   */\r\n  static getNumber<Default extends number | undefined = undefined>(\r\n    key: string,\r\n    def?: Default\r\n  ): ConditionalReturn<number, Default> {\r\n    return this._get(key, Primitive.Number, def);\r\n  }\r\n\r\n  /**\r\n   * @see {@link PrimitiveMethods.getNumber}\r\n   */\r\n  getNumber<Default extends number | undefined = undefined>(\r\n    key: string,\r\n    def?: Default\r\n  ): ConditionalReturn<number, Default> {\r\n    return PrimitiveMethods._get(key, Primitive.Number, def);\r\n  }\r\n\r\n  /**\r\n   * Get a boolean environment variable with optional fallback.\r\n   * Recognizes: `1`, `yes`, `true`, 'on' as **true**; `0`, `no`, `false`, 'off' as **false** (case-insensitive).\r\n   */\r\n  static getBoolean<Default extends boolean | undefined = undefined>(\r\n    key: string,\r\n    def?: Default\r\n  ): ConditionalReturn<boolean, Default> {\r\n    return this._get(key, Primitive.Boolean, def);\r\n  }\r\n\r\n  /**\r\n   * @see {@link PrimitiveMethods.getBoolean}\r\n   */\r\n  getBoolean<Default extends boolean | undefined = undefined>(\r\n    key: string,\r\n    def?: Default\r\n  ): ConditionalReturn<boolean, Default> {\r\n    return PrimitiveMethods._get(key, Primitive.Boolean, def);\r\n  }\r\n\r\n  /**\r\n   * Get a bigint environment variable with optional fallback.\r\n   * Automatically converts string values to bigint.\r\n   */\r\n  static getBigInt<Default extends bigint | undefined = undefined>(\r\n    key: string,\r\n    def?: Default\r\n  ): ConditionalReturn<bigint, Default> {\r\n    return this._get(key, Primitive.BigInt, def);\r\n  }\r\n\r\n  /**\r\n   * @see {@link PrimitiveMethods.getBigInt}\r\n   */\r\n  getBigInt<Default extends bigint | undefined = undefined>(\r\n    key: string,\r\n    def?: Default\r\n  ): ConditionalReturn<bigint, Default> {\r\n    return PrimitiveMethods._get(key, Primitive.BigInt, def);\r\n  }\r\n\r\n  /**\r\n   * Get a symbol environment variable with optional fallback.\r\n   * Creates a symbol from the string value.\r\n   */\r\n  static getSymbol<Default extends symbol | undefined = undefined>(\r\n    key: string,\r\n    def?: Default\r\n  ): ConditionalReturn<symbol, Default> {\r\n    return this._get(key, Primitive.Symbol, def);\r\n  }\r\n\r\n  /**\r\n   * @see {@link PrimitiveMethods.getSymbol}\r\n   */\r\n  getSymbol<Default extends symbol | undefined = undefined>(\r\n    key: string,\r\n    def?: Default\r\n  ): ConditionalReturn<symbol, Default> {\r\n    return PrimitiveMethods._get(key, Primitive.Symbol, def);\r\n  }\r\n}\r\n","import { PrimitiveMethods } from './PrimitiveMethods.js';\r\n\r\nimport type {\r\n  AdvancedConverterReturn,\r\n  ArrayConverter,\r\n  BuiltInConverter,\r\n  ConditionalReturn,\r\n  ConverterFunction\r\n} from '../Types.js';\r\n\r\n/**\r\n * Mixin for advanced methods for environment variable conversion using built-in and custom converters\r\n * @internal\r\n */\r\nexport class AdvancedMethods extends PrimitiveMethods {\r\n  /**\r\n   * Get an environment variable using a built-in converter.\r\n   * Supports both Converter enum values and array converter configurations.\r\n   */\r\n  static getUsing<TConverter extends BuiltInConverter | ArrayConverter, TFallback = undefined>(\r\n    key: string,\r\n    converter: TConverter,\r\n    fallback?: TFallback\r\n  ): AdvancedConverterReturn<TConverter, TFallback>;\r\n  static getUsing<TReturn>(key: string, converter: BuiltInConverter | ArrayConverter, fallback?: TReturn): TReturn;\r\n  static getUsing<TConverter extends BuiltInConverter | ArrayConverter, TFallback = undefined>(\r\n    key: string,\r\n    converter: TConverter,\r\n    fallback?: TFallback\r\n  ): AdvancedConverterReturn<TConverter, TFallback> {\r\n    // Check if variable exists first, for consistency with primitive methods\r\n    const rawVal = this.config.get(key);\r\n    if (!rawVal) return fallback as AdvancedConverterReturn<TConverter, TFallback>;\r\n\r\n    const hasFallback = fallback !== undefined;\r\n    const result = this.parser.convertValue(key, fallback, converter, hasFallback);\r\n\r\n    return result as AdvancedConverterReturn<TConverter, TFallback>;\r\n  }\r\n\r\n  /**\r\n   * @see {@link AdvancedMethods.getUsing}\r\n   */\r\n  getUsing<TConverter extends BuiltInConverter | ArrayConverter, TFallback = undefined>(\r\n    key: string,\r\n    converter: TConverter,\r\n    fallback?: TFallback\r\n  ): AdvancedConverterReturn<TConverter, TFallback>;\r\n  getUsing<TReturn>(key: string, converter: BuiltInConverter | ArrayConverter, fallback?: TReturn): TReturn;\r\n  getUsing<TConverter extends BuiltInConverter | ArrayConverter, TFallback = undefined>(\r\n    key: string,\r\n    converter: TConverter,\r\n    fallback?: TFallback\r\n  ): AdvancedConverterReturn<TConverter, TFallback> {\r\n    return AdvancedMethods.getUsing(key, converter, fallback);\r\n  }\r\n\r\n  /**\r\n   * Get an environment variable using a custom converter function.\r\n   */\r\n  static getWith<TReturnType, TFallback extends TReturnType | undefined = undefined>(\r\n    key: string,\r\n    converter: ConverterFunction<TReturnType>,\r\n    fallback?: TFallback\r\n  ): ConditionalReturn<TReturnType, TFallback> {\r\n    // Check if variable exists first, for consistency with primitive methods\r\n    const rawVal = this.config.get(key);\r\n    if (!rawVal) return fallback as ConditionalReturn<TReturnType, TFallback>;\r\n\r\n    const hasFallback = fallback !== undefined;\r\n    // Convert the converter to match the expected signature via unknown\r\n    const result = this.parser.convertValue(\r\n      key,\r\n      fallback,\r\n      converter as unknown as ConverterFunction<TFallback>,\r\n      hasFallback\r\n    );\r\n\r\n    return result as ConditionalReturn<TReturnType, TFallback>;\r\n  }\r\n\r\n  /**\r\n   * @see {@link AdvancedMethods.getWith}\r\n   */\r\n  getWith<TReturnType, TFallback extends TReturnType | undefined = undefined>(\r\n    key: string,\r\n    converter: ConverterFunction<TReturnType>,\r\n    fallback?: TFallback\r\n  ): ConditionalReturn<TReturnType, TFallback> {\r\n    return AdvancedMethods.getWith(key, converter, fallback);\r\n  }\r\n}\r\n","import { AdvancedMethods } from './core/AdvancedMethods.js';\r\n\r\nexport { EnvaptCache } from './core/EnvapterBase.js';\r\nexport { Environment } from './core/EnvironmentMethods.js';\r\n\r\n/**\r\n * Main configuration class for environment variable management.\r\n *\r\n * Provides both static and instance methods for retrieving typed environment variables\r\n * with support for template resolution, multiple .env files, and environment detection.\r\n *\r\n * Extend your own classes from this to define properties with \\@Envapt decorators and provide access to environment variables methods.\r\n *\r\n * @example\r\n * ```ts\r\n * // Static usage\r\n * const port = Envapter.getNumber('PORT', 3000);\r\n * const url = Envapter.get('API_URL', 'http://localhost');\r\n *\r\n * // Instance usage\r\n * const env = new Envapter();\r\n * const dbUrl = env.get('DATABASE_URL', 'sqlite://memory');\r\n * ```\r\n *\r\n * @public\r\n */\r\nexport class Envapter extends AdvancedMethods {\r\n  /**\r\n   * Tagged template literal for resolving environment variables in template strings.\r\n   *\r\n   * @example\r\n   * ```ts\r\n   * // Given API_HOST=api.example.com and API_PORT=8080 in environment\r\n   * const endpoint = Envapter.resolve`Connecting to ${'API_HOST'}:${'API_PORT'}`;\r\n   * // Returns: \"Connecting to api.example.com:8080\"\r\n   *\r\n   * // Works with template variables in .env too:\r\n   * // API_URL=https://${API_HOST}:${API_PORT}\r\n   * const message = Envapter.resolve`Service endpoint: ${'API_URL'}`;\r\n   * // Returns: \"Service endpoint: https://api.example.com:8080\"\r\n   * ```\r\n   */\r\n  static resolve(strings: TemplateStringsArray, ...keys: string[]): string {\r\n    return strings.reduce((result, string, i) => {\r\n      const envKey = keys[i];\r\n      const envValue = envKey ? super.get(envKey, '') : '';\r\n      return result + string + envValue;\r\n    }, '');\r\n  }\r\n\r\n  /**\r\n   * @see {@link Envapter.resolve}\r\n   */\r\n  resolve(strings: TemplateStringsArray, ...keys: string[]): string {\r\n    return Envapter.resolve(strings, ...keys);\r\n  }\r\n}\r\n","import { EnvaptCache } from './core/EnvapterBase.js';\r\nimport { Envapter } from './Envapter.js';\r\nimport { Parser } from './Parser.js';\r\n\r\nimport type {\r\n  ArrayConverter,\r\n  BuiltInConverter,\r\n  ConverterFunction,\r\n  EnvaptConverter,\r\n  EnvaptOptions,\r\n  InferConverterReturnType,\r\n  InferPrimitiveFallbackType,\r\n  InferPrimitiveReturnType,\r\n  PrimitiveConstructor\r\n} from './Types.js';\r\n\r\nimport type { EnvapterService } from './Parser.js';\r\n\r\nfunction createPropertyDecorator<TFallback>(\r\n  key: string,\r\n  fallback: TFallback | undefined,\r\n  converter: EnvaptConverter<TFallback> | undefined,\r\n  hasFallback: boolean\r\n): PropertyDecorator {\r\n  return function (target: object, prop: string | symbol): void {\r\n    const propKey = String(prop);\r\n    // For static properties, target is the constructor function itself\r\n    // For instance properties, target is the prototype and we need target.constructor\r\n    // This prevents cache collisions between static and instance properties with the same name\r\n    const className = typeof target === 'function' ? target.name : target.constructor.name;\r\n    const cacheKey = `${className}.${propKey}`;\r\n\r\n    // Create a property with a getter that handles environment changes\r\n    Object.defineProperty(target, propKey, {\r\n      get: function () {\r\n        // Check if the environment cache has been cleared (indicating config change)\r\n        // If so, we need to re-evaluate our cached value\r\n        let value = EnvaptCache.get(cacheKey) as TFallback | null | undefined;\r\n\r\n        // Re-evaluate if we don't have a cached value\r\n        if (value === undefined) {\r\n          const parser = new Parser(new Envapter() as unknown as EnvapterService);\r\n          value = parser.convertValue(key, fallback, converter, hasFallback);\r\n          EnvaptCache.set(cacheKey, value);\r\n        }\r\n\r\n        return value;\r\n      },\r\n      configurable: false,\r\n      enumerable: true\r\n    });\r\n  };\r\n}\r\n\r\n/**\r\n * Usage 1: Custom converter function with fallback provided\r\n *\r\n * @param key - Environment variable name to load\r\n * @param options - Configuration options with custom converter and required fallback\r\n * @public\r\n */\r\nexport function Envapt<TFallback>(\r\n  key: string,\r\n  options: { converter: (raw: string | undefined, fallback: TFallback) => TFallback; fallback: TFallback }\r\n): PropertyDecorator;\r\n\r\n/**\r\n * Usage 2: Custom converter function without fallback\r\n *\r\n * @param key - Environment variable name to load\r\n * @param options - Configuration options with custom converter only\r\n * @public\r\n */\r\nexport function Envapt<TReturnType>(\r\n  key: string,\r\n  options: { converter: ConverterFunction<TReturnType> }\r\n): PropertyDecorator;\r\n\r\n/**\r\n * Usage 3: Built-in converter with optional fallback\r\n *\r\n * @param key - Environment variable name to load\r\n * @param options - Configuration options with built-in converter\r\n * @public\r\n */\r\nexport function Envapt<TConverter extends BuiltInConverter>(\r\n  key: string,\r\n  options: { converter: TConverter; fallback?: InferConverterReturnType<TConverter> | undefined }\r\n): PropertyDecorator;\r\n\r\n/**\r\n * Usage 4: Array converter with optional fallback\r\n *\r\n * @param key - Environment variable name to load\r\n * @param options - Configuration options with array converter\r\n * @public\r\n */\r\nexport function Envapt<TConverter extends ArrayConverter>(\r\n  key: string,\r\n  options: { converter: TConverter; fallback?: InferConverterReturnType<TConverter> | undefined }\r\n): PropertyDecorator;\r\n\r\n/**\r\n * Usage 5: Primitive constructor with optional fallback\r\n *\r\n * @param key - Environment variable name to load\r\n * @param options - Configuration options with primitive constructor\r\n * @public\r\n */\r\nexport function Envapt<TConstructor extends PrimitiveConstructor>(\r\n  key: string,\r\n  options: {\r\n    converter: TConstructor;\r\n    fallback?: InferPrimitiveReturnType<TConstructor>;\r\n  }\r\n): PropertyDecorator;\r\n\r\n/**\r\n * Usage 6: Fallback only (no converter)\r\n *\r\n * @param key - Environment variable name to load\r\n * @param options - Configuration options with fallback only\r\n * @public\r\n */\r\nexport function Envapt<TFallback>(\r\n  key: string,\r\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\r\n  options: { fallback: TFallback; converter?: undefined }\r\n): PropertyDecorator;\r\n\r\n/**\r\n * Classic API: No fallback\r\n *\r\n * @param key - Environment variable name to load\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport function Envapt<_TReturnType = string | null>(key: string): PropertyDecorator;\r\n\r\n/**\r\n * Classic API: Primitive fallback only\r\n *\r\n * @param key - Environment variable name to load\r\n * @param fallback - Default primitive value\r\n * @param converter - Optional primitive constructor (String, Number, etc.)\r\n * @public\r\n */\r\nexport function Envapt<TFallback extends string | number | boolean | bigint | symbol | undefined>(\r\n  key: string,\r\n  fallback: InferPrimitiveFallbackType<TFallback>,\r\n  converter?: PrimitiveConstructor\r\n): PropertyDecorator;\r\n\r\n/**\r\n * Instance/Static Property decorator that automatically loads and converts environment variables.\r\n */\r\nexport function Envapt<TFallback = unknown>(\r\n  key: string,\r\n  fallbackOrOptions?: TFallback | EnvaptOptions<TFallback>,\r\n  converter?: EnvaptConverter<TFallback>\r\n): PropertyDecorator {\r\n  // Determine if using new options API or classic API\r\n  let fallback: TFallback | undefined;\r\n  let actualConverter: EnvaptConverter<TFallback> | undefined;\r\n  let hasFallback = true;\r\n\r\n  if (\r\n    fallbackOrOptions &&\r\n    typeof fallbackOrOptions === 'object' &&\r\n    ('fallback' in fallbackOrOptions || 'converter' in fallbackOrOptions)\r\n  ) {\r\n    // Modern API\r\n    const options = fallbackOrOptions;\r\n    fallback = options.fallback;\r\n    actualConverter = options.converter;\r\n    hasFallback = 'fallback' in options;\r\n  } else {\r\n    // Classic API\r\n    fallback = fallbackOrOptions as TFallback;\r\n    actualConverter = converter;\r\n    hasFallback = arguments.length > 1;\r\n  }\r\n\r\n  return createPropertyDecorator(key, fallback, actualConverter, hasFallback);\r\n}\r\n","/**\r\n * Enum for built-in converters\r\n * @public\r\n */\r\nexport enum Converters {\r\n  String = 'string',\r\n  Number = 'number',\r\n  Boolean = 'boolean',\r\n  Bigint = 'bigint',\r\n  Symbol = 'symbol',\r\n  Integer = 'integer',\r\n  Float = 'float',\r\n  Json = 'json',\r\n  Array = 'array',\r\n  Url = 'url',\r\n  Regexp = 'regexp',\r\n  Date = 'date',\r\n  Time = 'time'\r\n}\r\n\r\n/**\r\n * Type alias for converter values to maintain compatibility with existing string-based API\r\n * @internal\r\n */\r\nexport type ConverterValue = `${Converters}`;\r\n\r\n/**\r\n * Valid array element converter types (excludes array, json, regexp)\r\n * @internal\r\n */\r\nexport type ArrayElementConverter = Exclude<Converters, Converters.Array | Converters.Json | Converters.Regexp>;\r\n\r\n/**\r\n * Type alias for array element converter values\r\n * @internal\r\n */\r\nexport type ArrayElementConverterValue = `${ArrayElementConverter}`;\r\n"]}