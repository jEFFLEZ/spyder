export type WsMap = Record<string, string>;
export declare function isPowerShell(): boolean;
export declare function ensureNodeOptionsNoDeprecation(): void;
/** Détecte le gestionnaire de paquets utilisé */
export declare function detectPackageManager(cwd?: string): 'npm' | 'yarn' | 'pnpm';
/** Commandes équivalentes selon le gestionnaire */
export declare function getPackageCommand(pm: 'npm' | 'yarn' | 'pnpm', script: string): string;
/** Nettoie les node_modules verrouillés (utile sur Windows) */
export declare function cleanNodeModules(dir: string): void;
export declare function readRootPackage(root?: string): any;
/** Résout les workspaces en { alias -> chemin } avec déduplication par realpath */
export declare function resolveWorkspaces(root?: string): WsMap;
export declare function prefix(tag: string, b: Buffer): string;
/** Spawn sécurisé avec gestion des args et buffer */
export declare function spawnLogged(cmd: string, args: string[], cwd: string, tag: string): import("child_process").ChildProcess;
/** Détermine la commande d'installation optimale */
export declare function getInstallCommand(cwd: string): {
    cmd: string;
    args: string[];
};
/** Essaie d'installer les dépendances automatiquement */
export declare function tryInstallDeps(cwd: string, tag: string, logger?: any): Promise<boolean>;
/** Tue proprement un processus et ses enfants */
export declare function killProcessTree(child: ReturnType<typeof spawnLogged>): void;
export declare function exitAll(children: Array<ReturnType<typeof spawnLogged>>): void;
/** Installation séquentielle des dépendances pour tous les workspaces */
export declare function preInstallAllDeps(workspaces: WsMap, logger?: any): Promise<void>;
export type MilitaryUnit = {
    type: 'capitaine' | 'archer' | 'catapulte' | 'infanterie' | 'cavalerie' | 'centurion' | 'aquila' | 'balliste';
    name: string;
    path: string;
    role: string;
};
export type Formation = {
    type: 'bataillon' | 'legion' | 'armee';
    name: string;
    path: string;
    units: MilitaryUnit[];
    strength: number;
};
/** Classifie un fichier selon la hiérarchie militaire romaine */
export declare function classifyFile(filePath: string, fileName: string): MilitaryUnit | null;
/** Analyse une structure de dossiers et crée une formation militaire */
export declare function analyzeFormation(repoPath: string, repoName: string): Formation;
/** Analyse tous les workspaces et retourne leurs formations */
export declare function analyzeAllFormations(root?: string): Record<string, Formation>;
