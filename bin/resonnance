#!/usr/bin/env node
/* qf resonnance launcher */
const port = process.env.QFLUSHD_PORT ? Number(process.env.QFLUSHD_PORT) : (process.env.PORT ? Number(process.env.PORT) : 4500);
try {
  const srv = require('../dist/daemon/qflushd');
  if (srv && typeof srv.startServer === 'function') {
    srv.startServer(port).then(()=>{
      console.log('[resonnance] qflushd started on', port);
    }).catch((e)=>{
      console.error('[resonnance] failed to start', e);
      process.exit(1);
    });
  } else {
    console.error('[resonnance] cannot require dist/daemon/qflushd or missing startServer');
    process.exit(2);
  }
} catch (e) {
  console.error('[resonnance] error', e);
  process.exit(3);
}
