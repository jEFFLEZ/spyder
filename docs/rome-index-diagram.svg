<svg xmlns="http://www.w3.org/2000/svg" width="900" height="420" viewBox="0 0 900 420">
  <style>
    .bg { fill: #0b0b0b }
    .box { fill: #111; stroke: #2b2b2b; stroke-width: 1 }
    .title { fill: #e6e6e6; font-family: Inter, Arial, sans-serif; font-size: 16px }
    .label { fill: #bbb; font-size: 13px }
    .arrow { fill: none; stroke: #3ea6ff; stroke-width: 3; marker-end: url(#a) }
    .small { fill: #9ee; font-size: 12px }
    .node { fill: #0f1720; stroke: #293241; stroke-width: 1 }
  </style>
  <defs>
    <marker id="a" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#3ea6ff" />
    </marker>
  </defs>
  <rect class="bg" x="0" y="0" width="900" height="420" />

  <text x="36" y="40" class="title">Rome Index — Integration Diagram</text>

  <!-- Exterior -->
  <g transform="translate(40,80)">
    <rect class="node" x="0" y="0" width="180" height="90" rx="8"/>
    <text x="12" y="24" class="label">Exterior / "La Cambrousse"</text>
    <text x="12" y="44" class="small">random files, external projects, plugins</text>
    <text x="12" y="64" class="small">unstructured sources</text>
  </g>

  <!-- Rome Gate -->
  <g transform="translate(260,60)">
    <rect class="node" x="0" y="0" width="220" height="140" rx="10"/>
    <text x="16" y="28" class="label">Rome Gate — Indexing Tag</text>
    <text x="16" y="50" class="small">assign `rome` tag (type|path)</text>
    <text x="16" y="74" class="small">normalize -> token, metadata, checksum</text>
    <text x="16" y="98" class="small">conversion layer (ingest API)</text>
  </g>

  <!-- Qflush Kernel -->
  <g transform="translate(520,40)">
    <rect class="node" x="0" y="0" width="260" height="180" rx="12"/>
    <text x="18" y="28" class="label">Qflush Kernel</text>
    <text x="18" y="52" class="small">orchestrator / routing / policies</text>
    <text x="18" y="74" class="small">enforces conventions, tokens, signatures</text>
    <text x="18" y="96" class="small">publishes to NPZ / OC8</text>
  </g>

  <!-- NPZ / OC8 -->
  <g transform="translate(300,260)">
    <rect class="node" x="0" y="0" width="300" height="120" rx="10"/>
    <text x="14" y="26" class="label">NPZ / OC8 / Rome Services</text>
    <text x="14" y="48" class="small">policy engines, routing, metrics</text>
    <text x="14" y="70" class="small">stores & indexes (Redis optional)</text>
    <text x="14" y="92" class="small">provide APIs for apps</text>
  </g>

  <!-- Applications -->
  <g transform="translate(640,260)">
    <rect class="node" x="0" y="0" width="200" height="120" rx="10"/>
    <text x="12" y="30" class="label">Applications</text>
    <text x="12" y="54" class="small">VS Code, CLI, webviews, services</text>
    <text x="12" y="78" class="small">consumers of Rome tokens & indexes</text>
  </g>

  <!-- Arrows -->
  <path class="arrow" d="M220 125 L260 125" />
  <path class="arrow" d="M480 120 L520 120" />
  <path class="arrow" d="M560 180 L560 240" />
  <path class="arrow" d="M560 300 L620 300" />

  <!-- Legend -->
  <text x="36" y="360" class="small">Flow: Exterior → Rome Gate → Qflush Kernel → NPZ/OC8 → Applications</text>

</svg>